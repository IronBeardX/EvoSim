[lexer]

literals:
    + - * / % ( ) ^ @ < > { }

reserved:
    OR AND NOT TRUE FALSE WORLD WIDTH HEIGHT INFINITE DEFAULT AT SIZE TERRAIN

tokens:
    INTDIV EQ NEQ GE LE NUMBER ID


[parser]


maybe_newline =>
    newline
    epsilon


world_stmt =>
    WORLD { maybe_newline worldprop maybe_newline worldprop maybe_newline }

worldprop =>
    SIZE worldsize
    TERRAIN worldterrain

worldsize =>
    INFINITE
    { maybe_newline WIDTH NUMBER maybe_newline HEIGHT NUMBER maybe_newline } 

worldterrain =>
    { maybe_newline terrainprop_list }

terrainprop_list =>
    terrainprop maybe_newline terrainprop_list
    epsilon

terrainprop =>
    DEFAULT ID
    ID AT { maybe_newline NUMBER maybe_newline terrainposn_list }
    ID

terrainposn_list =>
    NUMBER maybe_newline terrainposn_list
    epsilon


disjunction =>
    conjunction OR conjunction
    conjunction

conjunction =>
    negation AND negation
    negation

negation =>
    NOT comparison
    comparison


comparison =>
    expr EQ expr
    expr NEQ expr
    expr GE expr
    expr LE expr
    expr < expr
    expr > expr
    expr


expr =>
    expr + term
    expr - term
    term

term =>
    term * factor
    term / factor
    term % factor
    term INTDIV factor
    factor

factor =>
    - factor
    power

power =>
    atom ^ factor
    atom @ factor
    atom

atom =>
    NUMBER
    TRUE
    FALSE
    ( expr )
